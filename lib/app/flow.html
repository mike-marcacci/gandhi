<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js"></script>
		<script src="flow.js"></script>
	</head>
	<body ng-app="flow">
		<div ng-controller="controller">
			<svg ng-attr-width="{{width}}" ng-attr-height="{{height}}">
				<g ng-attr-transform="translate({{options.node.width / -2 + options.node.margin.x}}, {{height - options.node.height}})">
					<g ng-repeat="node in nodes" ng-class="node.class" ng-attr-transform="translate({{node.x}}, {{node.y}})">
						<rect
							ng-attr-width="{{options.node.width}}"
							ng-attr-height="{{options.node.height}}"
							ng-attr-rx="{{options.node.radius}}"
							ng-attr-ry="{{options.node.radius}}"
							ng-attr-fill="{{options.node.fill}}"
						/>
						<foreignObject
							ng-attr-width="{{options.node.width}}"
							ng-attr-height="{{options.node.height}}"
							ng-attr-rx="{{options.node.radius}}"
							ng-attr-ry="{{options.node.radius}}"
						>
							<div ng-attr-style="
								text-align: center;
								width: {{options.node.width}}px;
								line-height: {{options.node.height}}px;
								color: {{options.node.color}};
								white-space: nowrap;
								text-overflow: ellipsis;
								overflow: hidden;
							"
							>{{node.title}}</div>
						</foreignObject>
					</g>

					<path
						ng-repeat="link in links"
						ng-attr-d="
							M {{link.source.x}} {{link.source.y}}
							Q {{link.q1[0][0]}} {{link.q1[0][1]}},
								{{link.q1[1][0]}} {{link.q1[1][1]}}
							Q {{link.q2[0][0]}} {{link.q2[0][1]}},
								{{link.q2[1][0]}} {{link.q2[1][1]}}
							T {{link.target.x}} {{link.target.y}}"
						ng-attr-stroke="{{options.link.stroke}}"
						ng-attr-stroke-width="{{options.link.strokeWidth}}"
						fill="transparent"
					/>
				</g>
			</svg>
		</div>
	</body>
</html>
